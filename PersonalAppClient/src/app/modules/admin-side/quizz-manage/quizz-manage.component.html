<div class="container-sm">
  <mat-card class="border-top border-3 border-primary">
    <mat-card-title>Quizz Create</mat-card-title>

    <form [formGroup]="createQuizzForm">
    <mat-card-content>

        <!--Header create quizz -->
        <div class="row">
          <div class="col col-md-8">
            <mat-form-field class="w-100" appearance="standard">
              <mat-label>Title quizz</mat-label>
              <input matInput placeholder="Placeholder" formControlName="title">
              <mat-icon matSuffix>edit</mat-icon>
              <mat-error *ngIf="title?.errors">
                Title quizz is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col col-md-4">
            <mat-form-field class="w-100" appearance="standard">
              <mat-label>Exam time</mat-label>
              <input matInput type="number"
              formControlName="examTime"
              placeholder="Input exam time" min="1">
              <span matSuffix>Minute</span>
              <mat-error *ngIf="examTime?.errors">
                Exam time need <strong>more than 1 minutes</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <!-- topic quizz -->
        <div class="row">
          <div class="col col-md-6">
            <mat-form-field class="w-100" appearance="standard">
              <mat-label>Select Topic</mat-label>
              <mat-select formControlName="topicId">
                <mat-option *ngFor="let item of topicList" value="item.id">
                  {{item.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- quizz level -->
          <div class="col col-md-6">
            <mat-form-field class="w-100" appearance="standard">
              <mat-label>Select Level</mat-label>
              <mat-select formControlName="level">
                <mat-option value="Easy">Easy</mat-option>
                <mat-option value="Medium">Medium</mat-option>
                <mat-option value="Hard">Hard</mat-option>
              </mat-select>
            </mat-form-field>

          </div>
        </div>
        <mat-checkbox formControlName="isPublic" [color]="'primary'">Public</mat-checkbox>

        <!-- add form multiple choice -->
        <mat-card-actions>
          <button type="button"
          (click)="addFormQuestion()"
          mat-mini-fab color="primary" aria-label="Example icon button with a menu icon">
            <mat-icon>add</mat-icon>
          </button>

        </mat-card-actions>

        <div formArrayName="multiplechoiceQuestions" *ngIf="multiplechoiceQuestions.controls.length">
        <mat-expansion-panel class="border-top border-3 border-danger mt-3" expanded="{{true}}"
          *ngFor="let item of multiplechoiceQuestions.controls; let index = index">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Question {{index + 1}}
            </mat-panel-title>
          </mat-expansion-panel-header>
            <form [formGroupName]="index">
              <mat-card-actions>
                <button type="button"
                (click)="removeMultipleQuestion(index)"
                mat-mini-fab color="warn" aria-label="Example icon button with a menu icon">
                  <mat-icon>delete</mat-icon>
                </button>
              </mat-card-actions>
              <!-- header create question  -->
              <div class="row">
                <div class="col col-md-9">
                  <mat-form-field class="w-100" appearance="standard">
                    <mat-label>Title Question</mat-label>
                    <input matInput placeholder="Placeholder" formControlName="questionText">
                    <mat-icon matSuffix>mood</mat-icon>
                    <mat-error *ngIf="getFormControlMultipleChoice(index, 'questionText')?.errors">
                      Title question is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>

                <div class="col col-md-3">
                  <mat-form-field class="w-100" appearance="standard" floatLabel="always">
                    <mat-label>Mark</mat-label>
                    <input matInput
                    formControlName="mark"
                    type="number" class="example-right-align" placeholder="0">
                    <span matPrefix>&nbsp;</span>
                    <span matSuffix>.00</span>
                    <mat-error *ngIf="getFormControlMultipleChoice(index, 'mark')?.errors">
                      Mark of question is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <!-- button upload image -->
              <button class="mt-2" type="button" mat-raised-button (click)="fileInput.click()">Image
                <mat-icon matSuffix>file_upload</mat-icon>
              </button>
              <input hidden #fileInput type="file" id="file">

              <!-- Text answer A, B, C, D -->
              <div class="row mt-3" *ngFor="let item of multipleChoices">
                <div class="col">
                  <mat-form-field appearance="standard">
                    <mat-icon matSuffix>radio_button_unchecked</mat-icon>
                    <mat-label>{{item.title}}</mat-label>
                    <input matInput placeholder="Placeholder" formControlName="{{item.value}}">
                    <mat-error *ngIf="getFormControlMultipleChoice(index, item.value)?.errors">
                      {{item.title}} is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <mat-form-field appearance="standard">
                    <mat-label>Select correct answer</mat-label>
                    <mat-select formControlName="correctAnswer">
                      <mat-option *ngFor="let item of multipleChoices"
                      [value]="item.key">{{item.title}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </form>
        </mat-expansion-panel>
      </div>


    </mat-card-content>
  </form>
  </mat-card>
</div>
